Detective City: Вижн-документ
============================

Представьте игру про город, полный секретов, интриг и преступлений, а игрок — детектив, 
погружённый в симуляцию процедурно генерируемого общества.

1. Краткое описание:
- Shadow of Doubt показала потенциал процедурных детективных симуляторов, но не 
  смогла удовлетворительно раскрыть тему. Есть большой потенциал и уже готовые игроки,
  которые хотят более развитые детективные симмуляторы.
- Наша цель — создать платформу для прототипирования идей в жанре «детектив в
  городе»: симулятор, где можно быстро тестировать и комбинировать игровые
  механики, связанные с расследованиями, поведением NPC и динамикой городских
  событий.
- Мы сейчас делаем не игру, а инструмент для прототипирования новых форм интерактивных
  историй и экспериментов с симуляцией.

2. Цели и ценности проекта
**Главная цель:**
Создать платформу, способную генерировать исследовательский контент, который
останется интересным для игрока неограниченно долго, за счёт глубины и разнообразия 
возникающих ситуаций.

**Ключевые ценности:**
- **Системный подход:** Системы должны порождать неожиданные сценарии и
  реагировать на действия игрока и NPC, а не работать по жёстким скриптам.
- **Эмерджентность контента:** Ограниченное количство систем может давать неограниченное 
  количество комбинаций, что позволяет всегда иметь контент для исследования.
- **Экспериментальность:** Платформа предназначена для быстрого тестирования
  новых идей, механик и гипотез. 
- **Модульность и открытость:** Архитектура строится с прицелом на модульность,
  поддержку модификаций и открытый исходный код.
- **Фокус на информации и социальных взаимодействиях:** Особое внимание уделяется
  механикам, связанным с тайнами, секретами, манипуляцией знаниями и социальными
  интригами между NPC.
- **Прозрачность и минимализм:** Минимум графики, максимум прозрачности процессов
  для удобства анализа и отладки.

**Долгосрочное видение:**
Понять что работает, что дает интересный новый геймплей. 
Если по итогам экспериментов появятся новые, достойные внимания механики, платформа может перерасти в
коммерческую игру.

3. Игромеханики и фичи.
------------------------------

- **Симуляция знаний и секретов:**
  Каждый NPC обладает уникальным набором знаний, секретов и информации о мире,
  других персонажах и событиях. Система позволяет моделировать, кто что знает,
  как информация распространяется, и как этим можно манипулировать.

- **Тайные общества и социальные группы:**
  В мире существуют скрытые группы и альянсы, которые влияют на поведение NPC,
  порождают уникальные сценарии (шантаж, заговоры, манипуляции).

- **Детективные расследования:**
  Игрок может собирать улики, анализировать связи между событиями и персонажами,
  выдвигать гипотезы и обвинения.

- **Реакция NPC на наблюдение:**
  Персонажи реагируют на присутствие игрока и других NPC: преступник не станет
  совершать преступление на глазах свидетеля, может пытаться обмануть или отвлечь
  наблюдателя.

- **Манипуляция информацией:**
  NPC и игрок могут использовать слухи, ложные следы, шантаж и другие способы
  влияния на знания и поведение окружающих.

- **Гибкая архитектура симуляции:**
  Все системы построены модульно, что позволяет быстро добавлять, заменять или
  отключать отдельные механики для экспериментов.

- **Минималистичная визуализация:**
  Визуальная часть служит для отладки и анализа:
  акцент на прозрачности процессов и удобстве наблюдения за симуляцией.

- **Поддержка модификаций:**
  Платформа изначально проектируется с возможностью расширения и поддержки
  пользовательских модов.

4. Техническая архитектура

4.1. Базовые технологии:
- Unity 6 LTS 
- C# как основной язык разработки

4.2. Графическая реализация:
- Графическая подсистема будет разработана после появления специалиста
- Текущий прототип использует абстрактное представление мира в виде графов
- Архитектура позволяет легко заменить визуализацию на 2D или 3D.

4.3. Ключевые архитектурные паттерны:
- Единая точка доступа
- Внедрение зависимостей (DI)
- Компонентный подход на MonoBehaviour на моменте портотипирования.
- Разделение данных и систем для возможности последующего развития в ECS.

4.4. Модульность и расширяемость:
- Все системы реализованы как независимые модули
- Четкие интерфейсы между системами
- Поддержка горячей замены механик
- Встроенная система модификаций

4.5. Особенности реализации:
- Акцент на тестируемость и отладку
- Подробное логирование всех ключевых событий
- Инструменты визуализации состояния симуляции
- Минимальные зависимости между системами

5. Планирование

5.1. Базовый скелет (MVP для прототипирования, 1-2 недели)
- Мир и локации: граф связанных помещений
- NPC с базовыми потребностями и расписанием
- Utility AI для принятия решений
- Система черт характера
- Механики работы и воровства
- Примитивная визуализация для отладки

5.2. Наращивание контента и механик (3-4 недели)
- Профессии и социальные роли
- Новые черты характера
- Социальные связи и отношения
- Распространение информации, слухи, прямое наблюдение.
- Динамические события
- Система репутации
- Скрытые мотивы и секреты NPC

5.3. UX и инструменты (2-3 недели)
- Улучшение интерфейса наблюдения
- Визуализация связей и событий
- Автоматический сбор статистики
- Инструменты для моддинга
- Сценарный запуск для тестирования
- Система логирования событий

5.4. Эксперименты с системами (2-3 месяца)
- **Симуляция знаний и секретов:** Эксперименты с динамическим распространением, сокрытием и расследованием информации.
  Тестирование влияния внутриигровой информации на поведение NPC.
- **Тайные общества:** Моделирование воздействия скрытых фракций на городскую жизнь. Тестирование сценариев шантажа, 
  заговоров и манипуляций.
- **Развитие детективных расследований:** Создание сложных, многоуровневых детективных задач. Эксперименты с различными типами улик,
  методами их сбора и анализа. Разработка ИИ детективов способных работать в той же среде что и игрок.
- **Реакция NPC на наблюдение:** Проработка глубины ИИ NPC. Влияние окружающей среды и повдеения игрока на систему принятия решений 
  преступников и других агентов.
- **Манипуляция информацией:** Разработка и тестирование механик, позволяющих игроку и NPC активно использовать слухи, ложные следы и 
  шантаж для достижения своих целей.
- **Интеграция и связывание механик:** Объединение всех разработанных систем в единую, когерентную симуляцию. Тестирование взаимодействия 
  между различными механиками и их влияние на общую динамику мира.

5.5. Тестирование и фидбек
- Тестирование. Стресс тесты. Оптимизация.
- Анализ и итерирование.
- Формулировка ГДД игрового продукта на основании результатов экспериментов.
